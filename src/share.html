<extends src="base.html">
	<block name="title">
		Share
	</block>
	<block name="main">
		<h1>Share with Jesse</h1>
		<form
			data-netlify="true"
			enctype="application/x-www-form-urlencoded"
			method="POST"
			name="share"
		>
			<fieldset>
				<h2>You are sharing:</h2>
				<label> Title: <input name="title" required /> </label>
				<label> Url: <input type="url" name="url" /> </label>
				<label> Text: <textarea name="text"></textarea> </label>
			</fieldset>
			<fieldset>
				<h2>Who are you?</h2>
				<label> Name: <input name="name" autocomplete="name" /> </label>
				<label>
					Email:
					<input type="email" name="email" autocomplete="email" />
				</label>
			</fieldset>
			<button type="submit">Share</button>
		</form>
		<script>
			const params = new URL(location).searchParams;
			const form = document.forms.share;
			form.title.value = params.get('title');
			form.text.value = params.get('text');
			const url = params.get('url');
			// sometimes url is null, and the url is in text instead, FML
			form.url.value = url ? url : params.get('text');
			console.debug('share.html script executed');
		</script>
	</block>
</extends>
