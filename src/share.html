<extends src="base.html">
	<block name="title">
		Share
	</block>
	<block name="main">
		<h2 id="sharing">Sharing with Jesse</h2>
		<form
			data-netlify="true"
			enctype="application/x-www-form-urlencoded"
			method="POST"
			name="share"
			id="shareForm"
		>
			<label>
				Title:
				<input name="title" placeholder="What are you sharing?" />
			</label>
			<label>
				Url:
				<input
					type="url"
					name="url"
					placeholder="https://www.example.com"
				/>
			</label>
			<label>
				Text:
				<textarea
					name="text"
					placeholder="Why are you sharing it?"
				></textarea>
			</label>
			<fieldset>
				<h3>Who are you?</h3>
				<label> Name: <input name="name" autocomplete="name" /> </label>
				<label>
					Email:
					<input type="email" name="email" autocomplete="email" />
				</label>
			</fieldset>
			<button type="submit">Share</button>
		</form>
		<script>
			const params = new URL(location).searchParams;
			const form = document.forms.share;
			form.title.value = params.get('title');
			form.text.value = params.get('text');
			const url = params.get('url');
			// sometimes url is null, and the url is in text instead, FML
			form.url.value = url ? url : params.get('text');
			console.debug('share.html script executed');
		</script>
	</block>
</extends>
