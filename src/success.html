<extends src="base.html">
	<block name="title">
		Success
	</block>
	<block name="main">
		<h2>Thanks for Sharing!</h2>
		<share-list></share-list>
		<script type="module">
			import {
				html,
				component,
				useState,
				useEffect,
			} from 'https://cdn.pika.dev/haunted';

			customElements.define('share-list', component(ShareList));

			function ShareList() {
				const [items, setItems] = useState([]);

				useEffect(async () => {
					const res = await fetch('.netlify/functions/shares');
					const data = await res.json();
					setItems(data);
					console.log('âš¡', data);
				}, []);
				
				return html`
					<ol>
						${items.map(
							(item) =>
								html`
									<li>${item.breed}</li>
								`,
						)}
					</ol>
				`;
			}
		</script>
	</block>
</extends>
